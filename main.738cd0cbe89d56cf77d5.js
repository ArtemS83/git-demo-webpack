(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("L1EO"),n("8cZI"),n("lmye"),n("D/wG"),n("JBxO"),n("FdtR"),n("wcNg");var s=n("czhI"),r=n.n(s);function o(e,t,n,s,r,o,i){try{var a=e[o](i),d=a.value}catch(e){return void n(e)}a.done?t(d):Promise.resolve(d).then(s,r)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var i=e.apply(t,n);function a(e){o(i,s,r,a,d,"next",e)}function d(e){o(i,s,r,a,d,"throw",e)}a(void 0)}))}}var a={signupBtn:document.querySelector(".signup"),loginBtn:document.querySelector(".login"),logoutBtn:document.querySelector(".logout"),signupForm:document.querySelector(".form-signup"),loginForm:document.querySelector(".form-login"),registrationBtn:document.querySelector(".form-signup button"),textError:document.querySelector(".span-error"),userName:document.querySelector(".user-info .name"),userEmail:document.querySelector(".user-info .email"),contentForm:document.querySelector(".content"),formADD:document.querySelector(".form"),listContacs:document.querySelector(".js-list"),textNoContacts:document.querySelector(".span-no-contacts"),formUpdate:document.querySelector(".form-update")};r.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var d=function(e){r.a.defaults.headers.common.Authorization="Bearer "+e};function c(e){e.preventDefault(),a.textError.classList.add("is-hidden");var t,n=e.currentTarget.elements.userName.value,s=e.currentTarget.elements.email.value,o=e.currentTarget.elements.password.value;(t={name:n,email:s,password:o},r.a.post("/users/signup",t).then((function(e){var t=e.data;return d(t.token),t}))).then((function(e){a.userName.textContent=e.user.name,a.userEmail.textContent=e.user.email,a.signupForm.reset(),a.textError.classList.add("is-hidden"),a.signupForm.classList.add("is-hidden"),a.contentForm.classList.remove("is-hidden"),a.logoutBtn.classList.remove("is-hidden"),a.textNoContacts.classList.remove("is-hidden")})).catch((function(e){a.textError.classList.remove("is-hidden"),console.log(e)}))}function u(e){e.preventDefault(),a.textError.classList.add("is-hidden"),function(e){l.apply(this,arguments)}({email:e.currentTarget.elements.email.value,password:e.currentTarget.elements.password.value})}function l(){return(l=i(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t);case 3:n=e.sent,s=n.user,a.userName.textContent=s.name,a.userEmail.textContent=s.email,a.loginForm.reset(),a.textError.classList.add("is-hidden"),a.loginForm.classList.add("is-hidden"),a.contentForm.classList.remove("is-hidden"),a.logoutBtn.classList.remove("is-hidden"),m(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),a.textError.classList.remove("is-hidden"),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function m(){r.a.get("/contacts").then((function(e){return e.data})).then((function(e){!function(e){if(a.listContacs.innerHTML="",e.length<=0)return void a.textNoContacts.classList.remove("is-hidden");f(e)}(e)})).catch((function(e){return console.log(e)}))}function f(e){var t=e.map((function(e){var t=e.id;return'<li>\n        <span class="js-name-'+t+'">'+e.name+'</span>:  <span class="js-number-'+t+'">'+e.number+'</span>\n        \n          <button class="delete" data-id='+t+' data-type="delete">delete</button>\n          <button class="update" data-id='+t+' data-type="update">update</button>\n        </li>'})).join("");a.listContacs.insertAdjacentHTML("beforeend",t)}function h(e){return r.a.post("/users/login",e).then((function(e){var t=e.data;return d(t.token),t}))}a.signupBtn.addEventListener("click",(function(){a.signupBtn.classList.add("is-hidden"),a.loginBtn.classList.add("is-hidden"),a.signupForm.classList.remove("is-hidden"),a.signupForm.addEventListener("submit",c)})),a.loginBtn.addEventListener("click",(function(){a.signupBtn.classList.add("is-hidden"),a.loginBtn.classList.add("is-hidden"),a.loginForm.classList.remove("is-hidden"),a.loginForm.addEventListener("submit",u)})),a.logoutBtn.addEventListener("click",(function(){r.a.post("/users/logout").then((function(){a.userName.textContent="",a.userEmail.textContent="",a.logoutBtn.classList.add("is-hidden"),a.textError.classList.add("is-hidden"),a.loginForm.classList.add("is-hidden"),a.contentForm.classList.add("is-hidden"),a.signupBtn.classList.remove("is-hidden"),a.loginBtn.classList.remove("is-hidden"),a.listContacs.innerHTML="",a.textNoContacts.classList.add("is-hidden"),a.formUpdate.classList.add("is-hidden")})).catch((function(e){a.textError.classList.remove("is-hidden"),console.log(e)}))})),a.formADD.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget.elements.name.value,n=e.currentTarget.elements.number.value,s={name:t,number:n};(o=s,r.a.post("/contacts",o).then((function(e){return e.data}))).then((function(e){var t=[];t.push(e),f(t),a.textError.classList.add("is-hidden")})).then((function(){s.name="",s.value="",a.formADD.reset(),a.textNoContacts.classList.add("is-hidden")})).catch((function(e){a.textError.classList.remove("is-hidden"),console.log(e)}));var o})),a.listContacs.addEventListener("click",(function(e){var t=e.target.dataset,n=t.id,s=t.type;if("BUTTON"!==e.target.nodeName)return;n&&"delete"===s&&(o=n,r.a.delete("/contacts/"+o).then((function(e){return e.data}))).then((function(){a.textError.classList.add("is-hidden"),m()})).catch((function(e){a.textError.classList.remove("is-hidden"),console.log(e)}));var o;if(n&&"update"===s){var i=document.querySelector(".js-name-"+n),d=document.querySelector(".js-number-"+n),c={updateContact:i.textContent,number:d.textContent};a.contentForm.classList.add("is-hidden"),a.formUpdate.classList.remove("is-hidden"),a.formUpdate.elements.name.value=c.updateContact,a.formUpdate.elements.number.value=c.number,a.formUpdate.addEventListener("submit",(function e(t){t.preventDefault(),function(e,t){return r.a.patch("/contacts/"+t,e).then((function(e){return e.data}))}({name:t.target.elements.name.value,number:t.target.elements.number.value},n).then((function(){a.textError.classList.add("is-hidden"),a.formUpdate.classList.add("is-hidden"),a.formUpdate.reset(),a.contentForm.classList.remove("is-hidden"),m()})).catch((function(e){a.textError.classList.remove("is-hidden"),console.log(e)})),a.formUpdate.removeEventListener("submit",e)}))}}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.738cd0cbe89d56cf77d5.js.map